<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –æ—Ç—á—ë—Ç–∞ P&F</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #ff7e5f 0%, #48bb78 50%, #feb47b 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        .container { 
            max-width: 1200px; 
            margin: 0 auto;
            flex: 1;
        }
        
        .header { text-align: center; margin-bottom: 30px; color: white; }
        .logo { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 15px; }
        .logo-image { 
            width: 60px; height: 60px; border-radius: 50%;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); overflow: hidden;
        }
        .logo-image img { width: 100%; height: 100%; object-fit: cover; }
        .logo-text { font-size: 1.8rem; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .check-mark { color: #ff7e5f; font-weight: bold; }
        
        .grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
        @media (min-width: 768px) { .grid { grid-template-columns: 1fr 1fr; } }
        
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .card h2 { 
            color: #2d3748; 
            margin-bottom: 20px; 
            border-bottom: 2px solid #ff7e5f; 
            padding-bottom: 8px;
            text-align: center;
        }
        
        .form-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        @media (min-width: 480px) { .form-grid { grid-template-columns: repeat(2, 1fr); } }
        .form-group { display: flex; flex-direction: column; }
        label { font-size: 14px; font-weight: 600; color: #4a5568; margin-bottom: 5px; }
        input, select { 
            padding: 12px; 
            border: 2px solid #e2e8f0; 
            border-radius: 8px; 
            font-size: 16px; 
            background: #f8fafc; 
            width: 100%; 
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            transform: translateZ(0);
            font-size: 16px; 
        }
        @media screen and (max-width: 768px) {
            input[type="date"],
            input[type="number"],
            input[type="text"],
            select {
                font-size: 16px !important;
                line-height: 1.2;
                min-height: 44px;
            }
        }
        
        .report-container { 
            background: #f7fafc; 
            border-radius: 10px; 
            border: 2px solid #e2e8f0; 
            overflow: hidden; 
            margin-bottom: 20px; 
        }
        .report-header { 
            background: linear-gradient(135deg, #ff7e5f 0%, #48bb78 100%); 
            color: white; 
            padding: 12px 15px; 
            font-weight: 600;
            text-align: center;
        }
        .report { 
            padding: 20px; 
            font-family: 'Courier New', monospace; 
            font-size: 14px; 
            line-height: 1.5; 
            white-space: pre-wrap; 
            background: white; 
            min-height: 200px;
            color: #2d3748;
        }
        
        .buttons { display: flex; gap: 10px; margin-bottom: 15px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: 600; font-size: 16px; cursor: pointer; transition: all 0.3s ease; }
        button:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .copy-btn { background: #ff7e5f; color: white; }
        .copy-admin-btn { background: #4299e1; color: white; }
        .reset-btn { background: #f56565; color: white; }
        
        .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 15px; }
        .stat-item { text-align: center; padding: 12px; background: #c6f6d5; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stat-value { font-size: 1.2rem; font-weight: bold; color: #2d3748; }
        
        .full-width { grid-column: 1 / -1; }
        
        .admin-section { margin-top: 25px; }
        .admin-report-container { 
            background: #f7fafc; 
            border-radius: 10px; 
            border: 2px solid #4299e1; 
            overflow: hidden; 
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(66, 153, 225, 0.2);
        }
        .admin-report-header { 
            background: linear-gradient(135deg, #4299e1 0%, #667eea 100%); 
            color: white; 
            padding: 12px 15px; 
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .admin-report { 
            padding: 20px; 
            font-family: 'Courier New', monospace; 
            font-size: 14px; 
            line-height: 1.6; 
            white-space: pre-wrap; 
            background: white; 
            min-height: 180px;
            color: #2d3748;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
        }
        
        .city-selector { 
            display: flex; 
            gap: 10px; 
            align-items: center; 
            margin-bottom: 15px;
            padding: 15px;
            background: #ebf8ff;
            border-radius: 8px;
            border: 1px solid #bee3f8;
        }
        .city-selector label { 
            font-weight: 600; 
            color: #2b6cb0;
            margin-bottom: 0;
            min-width: 60px;
        }
        .city-selector select { 
            flex: 1; 
            max-width: 200px;
            border-color: #90cdf4;
        }
        .city-custom-input { 
            flex: 2; 
            display: none;
            border-color: #90cdf4;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        .admin-stat-item {
            text-align: center;
            padding: 10px;
            background: #ebf8ff;
            border-radius: 8px;
            border: 1px solid #bee3f8;
        }
        .admin-stat-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: #2b6cb0;
        }

        .admin-section h2 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 20px;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ—É—Ç–µ—Ä–∞ */
        .footer {
            text-align: center;
            margin-top: 30px;
            padding: 15px;
            color: white;
            font-size: 14px;
            opacity: 0.8;
            border-top: 1px solid rgba(255,255,255,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-image">
                    <img src="https://s.rbk.ru/v1_companies_s3/media/trademarks/c5ac7af5-2128-405b-af37-b96961967837.jpg" alt="P&F Logo">
                </div>
                <div class="logo-text">PACK&FLY</div>
            </div>
            <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 10px">
                <span class="check-mark">‚úî</span><span>‚Üí</span>
                <span class="check-mark">‚úî</span><span>‚Üí</span>
                <span class="check-mark">‚úî</span>
            </div>
            <p>–°–∏—Å—Ç–µ–º–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤</p>
        </div>

        <div class="grid">
            <div class="card">
                <h2>üìù –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç—á—ë—Ç–∞</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                        <input type="date" id="dateFrom" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="date" id="dateTo" oninput="updateAll()">
                    </div>
                    <div class="form-group full-width">
                        <label>–§–ò–û</label>
                        <select id="fio" onchange="handleFioChange()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                            <option value="–ö—É–Ω–∏—Ü—ã–Ω –ê.–°.">–ö—É–Ω–∏—Ü—ã–Ω –ê.–°.</option>
                            <option value="–ö–æ–Ω–µ–≤ –°.–í.">–ö–æ–Ω–µ–≤ –°.–í.</option>
                            <option value="–ß–∏—à–∫–æ–≤—Å–∫–∏–π –°. –°.">–ß–∏—à–∫–æ–≤—Å–∫–∏–π –°. –°.</option>
                            <option value="custom">–î—Ä—É–≥–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫...</option>
                        </select>
                        <input type="text" id="fioCustom" class="fio-custom-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞" style="display: none;" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ú–∞—à–∏–Ω–∞</label>
                        <input type="text" id="car" value="–¢–¢1" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–í—ã—Ä—É—á–∫–∞</label>
                        <input type="number" id="revenue" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–≠–∫–≤–∞–π—Ä–∏–Ω–≥</label>
                        <input type="number" id="acquiring" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–ª–∏—á–Ω—ã–µ</label>
                        <input type="number" id="cash" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–°–µ–∫—Ü–∏—è 02</label>
                        <input type="number" id="section02" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–°–µ–∫—Ü–∏—è 03 (–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã)</label>
                        <input type="number" id="section03" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–°–µ–∫—Ü–∏—è 06 (PF)</label>
                        <input type="number" id="section06" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–°–µ–∫—Ü–∏—è 08 (–ù–æ–∂–∏)</label>
                        <input type="number" id="section08" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</label>
                        <input type="number" id="section09" value="" step="1" min="0" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ù–∞–∫–ª–µ–π–∫–∏</label>
                        <input type="number" id="stickers" value="" step="1" min="0" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ù–æ–∂–∏</label>
                        <input type="number" id="knives" value="" step="1" min="0" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ó–∞—â–∏—Ç–∞</label>
                        <input type="number" id="protect" value="" step="1" min="0" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–ß–µ–∫–∏</label>
                        <input type="number" id="checks" value="" step="1" min="0" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–£–ø–∞–∫–æ–≤–∫–∏</label>
                        <input type="number" id="packs" value="" step="1" min="0" oninput="updateAll()">
                    </div>
                    <div class="form-group">
                        <label>–†—É–ª–æ–Ω—ã</label>
                        <input type="text" id="rolls" value="" oninput="updateAll()">
                    </div>
                    <div class="form-group full-width">
                        <label>–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂</label>
                        <input type="text" id="salesList" value="" oninput="updateAll()">
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>üìÑ –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–∞</h2>
                <div class="report-container">
                    <div class="report-header">–í–∞—à –æ—Ç—á—ë—Ç:</div>
                    <pre class="report" id="reportOutput"></pre>
                </div>
                <div class="buttons">
                    <button class="copy-btn" onclick="copyToClipboard()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç</button>
                    <button class="copy-admin-btn" onclick="copyAdminToClipboard()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–æ—Ç—á—ë—Ç</button>
                </div>
                <div class="buttons">
                    <button class="reset-btn" onclick="resetForm()">‚ôª –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã</button>
                </div>

                <!-- –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
                <div class="admin-section">
                    <h2>üëë –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á—ë—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                    <div class="city-selector">
                        <label>–ì–æ—Ä–æ–¥:</label>
                        <select id="city" onchange="handleCityChange()">
                            <option value="–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫">–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫</option>
                            <option value="custom">–î—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥...</option>
                        </select>
                        <input type="text" id="cityCustom" class="city-custom-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞" oninput="updateAll()">
                    </div>
                    
                    <div class="admin-report-container">
                        <div class="admin-report-header">
                            <span>–û—Ç—á—ë—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</span>
                            <span style="font-size: 12px; opacity: 0.9;">PACK&FLY</span>
                        </div>
                        <pre class="admin-report" id="adminReportOutput"></pre>
                    </div>

                    <div class="admin-stats">
                        <div class="admin-stat-item">
                            <div class="admin-stat-value" id="adminTotalRevenue">0</div>
                            <div>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</div>
                        </div>
                        <div class="admin-stat-item">
                            <div class="admin-stat-value" id="adminAccessoriesRevenue">0</div>
                            <div>–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</div>
                        </div>
                    </div>
                </div>

                <div class="stats" id="statsContainer">
                    <div class="stat-item">
                        <div class="stat-value">0.00</div>
                        <div>–°—É–º–º–∞ –ø–æ —Å–µ–∫—Ü–∏—è–º</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">0%</div>
                        <div>–ù–∞–ª–∏—á–Ω—ã–µ (%)</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">0%</div>
                        <div>–≠–∫–≤–∞–π—Ä–∏–Ω–≥ (%)</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –§—É—Ç–µ—Ä —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞—Ö -->
    <div class="footer">
        –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏: –ö–æ–Ω–µ–≤ –°–µ—Ä–≥–µ–π, –ö—É–Ω–∏—Ü—ã–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –≥.–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫ 2025
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ –§–ò–û
        function handleFioChange() {
            const fioSelect = document.getElementById('fio');
            const fioCustom = document.getElementById('fioCustom');
            
            if (fioSelect.value === 'custom') {
                fioCustom.style.display = 'block';
                fioCustom.focus();
            } else {
                fioCustom.style.display = 'none';
                fioCustom.value = '';
            }
            updateAll();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞
        function handleCityChange() {
            const citySelect = document.getElementById('city');
            const cityCustom = document.getElementById('cityCustom');
            
            if (citySelect.value === 'custom') {
                cityCustom.style.display = 'block';
                cityCustom.focus();
            } else {
                cityCustom.style.display = 'none';
                cityCustom.value = '';
            }
            updateAll();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –§–ò–û
        function getFio() {
            const fioSelect = document.getElementById('fio');
            const fioCustom = document.getElementById('fioCustom');
            
            if (fioSelect.value === 'custom') {
                return fioCustom.value || '';
            } else {
                return fioSelect.value || '';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞
        function getCity() {
            const citySelect = document.getElementById('city');
            const cityCustom = document.getElementById('cityCustom');
            
            if (citySelect.value === 'custom') {
                return cityCustom.value || '–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫';
            } else {
                return citySelect.value || '–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –ø–æ–ª—è
        function getValue(id) {
            const element = document.getElementById(id);
            return element ? element.value : '';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–ª–∞
        function formatNumber(value) {
            if (value === "" || value === null || value === undefined) return "0";
            const num = parseFloat(value);
            return isNaN(num) ? "0" : num.toFixed(2);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞
        function formatInteger(value) {
            if (value === "" || value === null || value === undefined) return "0";
            const num = parseInt(value);
            return isNaN(num) ? "0" : num.toString();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
        function formatDate(dateString) {
            if (!dateString) return "";
            const date = new Date(dateString);
            if (isNaN(date.getTime())) return dateString;
            
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear().toString().slice(-2);
            
            return `${day}.${month}.${year}`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω-–æ—Ç—á—ë—Ç–∞
        function formatDateForAdmin(dateString) {
            if (!dateString) return "";
            const date = new Date(dateString);
            if (isNaN(date.getTime())) return dateString;
            
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear().toString().slice(-2);
            
            return `${day}.${month}.${year}`;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
        function calcPercent(num, base) {
            const numerator = parseFloat(num) || 0;
            const denominator = parseFloat(base) || 0;
            return denominator > 0 ? Math.round((numerator / denominator) * 100) : 0;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
        function updateReport() {
            const reportOutput = document.getElementById('reportOutput');
            
            const dateFrom = getValue('dateFrom');
            const dateTo = getValue('dateTo');
            const fio = getFio();
            const car = getValue('car');
            const revenue = getValue('revenue');
            const acquiring = getValue('acquiring');
            const cash = getValue('cash');
            const section02 = getValue('section02');
            const section03 = getValue('section03');
            const section06 = getValue('section06');
            const section08 = getValue('section08');
            const section09 = getValue('section09');
            const stickers = getValue('stickers');
            const knives = getValue('knives');
            const protect = getValue('protect');
            const checks = getValue('checks');
            const packs = getValue('packs');
            const rolls = getValue('rolls');
            const salesList = getValue('salesList');

            const report = `${formatDate(dateFrom)}‚Äì${formatDate(dateTo)}
‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì‚Äì
${fio}
–ú–∞—à–∏–Ω–∞: ${car}
–û–±—â–∞—è —Å—É–º–º–∞ (–≤—ã—Ä—É—á–∫–∞) - ${formatNumber(revenue)}
–≠–∫–≤–∞–π—Ä–∏–Ω–≥ - ${formatNumber(acquiring)}
–ù–∞–ª–∏—á–Ω—ã–µ - ${formatNumber(cash)}
–û—Ç—á—ë—Ç –ø–æ —Å–µ–∫—Ü–∏—è–º –ø—Ä–∏–º:
02- ${formatNumber(section02)}
03- ${formatNumber(section03)}
06-${formatNumber(section06)}/${formatInteger(protect)}(${calcPercent(protect, packs)}%)
08-${formatNumber(section08)}/${formatInteger(knives)}(${calcPercent(knives, checks)}%) 
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-(${formatInteger(section09)}) (–ß–µ–∫–æ–≤:${formatInteger(checks)}) - (${calcPercent(section09, checks)}%)
–ù–∞–∫–ª–µ–π–∫–∞ - ${formatInteger(stickers)}(${calcPercent(stickers, packs)}%)
–ö–æ–ª-–≤–æ —Ä—É–ª–æ–Ω–æ–≤ –∑–∞ —Å–º–µ–Ω—É: ${rolls}
–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥–∞–∂: ${salesList}
–ö–æ–ª-–≤–æ —É–ø–∞–∫–æ–≤–æ–∫: ${formatInteger(packs)}`;

            reportOutput.textContent = report;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω-–æ—Ç—á–µ—Ç–∞
        function updateAdminReport() {
            const adminReportOutput = document.getElementById('adminReportOutput');
            
            const dateFrom = getValue('dateFrom');
            const dateTo = getValue('dateTo');
            const city = getCity();
            const packs = getValue('packs');
            const section06 = getValue('section06');
            const protect = getValue('protect');
            const knives = getValue('knives');
            const stickers = getValue('stickers');
            const section09 = getValue('section09');
            const checks = getValue('checks');
            const revenue = getValue('revenue');
            const section03 = getValue('section03');

            const adminReport = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ

${city} ${formatDateForAdmin(dateFrom)}-${formatDateForAdmin(dateTo)}

–£–ø–∞–∫–æ–≤–∫–∏: ${formatInteger(packs)}
PF: ${formatInteger(protect)}(${calcPercent(protect, packs)}%)  
–ù–æ–∂–∏: ${formatInteger(knives)}(${calcPercent(knives, checks)}%) 
–ù–∞–∫–ª–µ–π–∫–∏: ${formatInteger(stickers)}(${calcPercent(stickers, packs)}%)
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: ${formatInteger(section09)}(${calcPercent(section09, checks)}%) 
–í—ã—Ä—É—á–∫–∞: ${formatInteger(revenue)}
–í—ã—Ä—É—á–∫–∞ –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã: ${formatInteger(section03)}
–ü—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è: –Ω–µ—Ç`;

            adminReportOutput.textContent = adminReport;

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–¥–º–∏–Ω-–æ—Ç—á—ë—Ç–∞
            document.getElementById('adminTotalRevenue').textContent = formatInteger(revenue);
            document.getElementById('adminAccessoriesRevenue').textContent = formatInteger(section03);
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            const statsContainer = document.getElementById('statsContainer');
            
            const section02 = parseFloat(getValue('section02')) || 0;
            const section03 = parseFloat(getValue('section03')) || 0;
            const section06 = parseFloat(getValue('section06')) || 0;
            const section08 = parseFloat(getValue('section08')) || 0;
            const section09 = parseFloat(getValue('section09')) || 0;

            const totalSections = section02 + section03 + section06 + section08 + section09;
            const revenue = parseFloat(getValue('revenue')) || 0;
            const cash = parseFloat(getValue('cash')) || 0;
            const acquiring = parseFloat(getValue('acquiring')) || 0;
            
            const cashPercent = revenue > 0 ? Math.round((cash / revenue) * 100) : 0;
            const acquiringPercent = revenue > 0 ? Math.round((acquiring / revenue) * 100) : 0;

            statsContainer.innerHTML = `
                <div class="stat-item">
                    <div class="stat-value">${totalSections.toFixed(2)}</div>
                    <div>–°—É–º–º–∞ –ø–æ —Å–µ–∫—Ü–∏—è–º</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${cashPercent}%</div>
                    <div>–ù–∞–ª–∏—á–Ω—ã–µ (%)</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">${acquiringPercent}%</div>
                    <div>–≠–∫–≤–∞–π—Ä–∏–Ω–≥ (%)</div>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ–≥–æ
        function updateAll() {
            updateReport();
            updateAdminReport();
            updateStats();
        }

        // –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        async function copyToClipboard() {
            try {
                const reportOutput = document.getElementById('reportOutput');
                await navigator.clipboard.writeText(reportOutput.textContent);
                alert("‚úÖ –û—Ç—á—ë—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
            } catch {
                alert("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏");
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∞–¥–º–∏–Ω-–æ—Ç—á–µ—Ç–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        async function copyAdminToClipboard() {
            try {
                const adminReportOutput = document.getElementById('adminReportOutput');
                await navigator.clipboard.writeText(adminReportOutput.textContent);
                alert("‚úÖ –ê–¥–º–∏–Ω-–æ—Ç—á—ë—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
            } catch {
                alert("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∞–¥–º–∏–Ω-–æ—Ç—á—ë—Ç–∞");
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Ñ–æ—Ä–º—ã
        function resetForm() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –ø–æ–ª—è
            document.getElementById('dateFrom').value = '';
            document.getElementById('dateTo').value = '';
            document.getElementById('fio').value = '';
            document.getElementById('fioCustom').value = '';
            document.getElementById('fioCustom').style.display = 'none';
            document.getElementById('car').value = '–¢–¢1';
            document.getElementById('revenue').value = '';
            document.getElementById('acquiring').value = '';
            document.getElementById('cash').value = '';
            document.getElementById('section02').value = '';
            document.getElementById('section03').value = '';
            document.getElementById('section06').value = '';
            document.getElementById('section08').value = '';
            document.getElementById('section09').value = '';
            document.getElementById('stickers').value = '';
            document.getElementById('knives').value = '';
            document.getElementById('protect').value = '';
            document.getElementById('checks').value = '';
            document.getElementById('packs').value = '';
            document.getElementById('rolls').value = '';
            document.getElementById('salesList').value = '';
            document.getElementById('city').value = '–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫';
            document.getElementById('cityCustom').value = '';
            document.getElementById('cityCustom').style.display = 'none';
            
            updateAll();
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            updateAll();
        };

        // –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ DOM
        document.addEventListener('DOMContentLoaded', function() {
            updateAll();
        });

        // –ò –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
        setTimeout(updateAll, 100);
    </script>
</body>
</html>
